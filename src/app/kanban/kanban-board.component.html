<section class="card">
  <header class="header">
    <h3>Local Kanban (Signals)</h3>
    <div class="actions">
      <button class="btn btn-primary" (click)="adding.set(true)">
        Add Task
      </button>
      <select class="input" disabled>
        <option value="all">All</option>
        <option value="high">High only</option>
      </select>
    </div>
  </header>

  <div class="columns" cdkDropListGroup>
    <app-kanban-column
      [title]="'Todo'"
      [tasks]="store.todo()"
      [state]="'todo'"
      (drop)="onDrop($event)"
    />
    <app-kanban-column
      [title]="'Doing'"
      [tasks]="store.doing()"
      [state]="'doing'"
      (drop)="onDrop($event)"
    />
    <app-kanban-column
      [title]="'Done'"
      [tasks]="store.done()"
      [state]="'done'"
      (drop)="onDrop($event)"
    />
  </div>
  <footer class="footer">
    <!-- TODO: show derived stats (highCount, progress, etc.) -->
    <span class="muted">Progress: {{ store.progress().toFixed(2) }}%</span>
  </footer>
</section>

@if (adding()) {
<app-add-task-dialog (cancel)="adding.set(false)" (create)="adding.set(false)">
</app-add-task-dialog>
}
